{% extends "layout.html" %}

{% block title %}
    Browse
{% endblock %}

{% block main %}
  <div class="container_brvp">
    <div class="search_input sticky">
      <h2>Your Workout</h2>
        <!-- retrieve workout -->
        <form action="/view_plan" method="post" class="search_form" id="retrieve_wk">
            <select name="wk_plan" class="wide-select" id="get_wk_name">
                <option style="display:none;" value="0">Select Workout</option>
                {% for i in user_workouts %}
                <option value="{{i['wk_name']}}">{{i['wk_name']}}</option>
                {% endfor %}
            </select>
            <input type="submit" value="See"/>
        </form>
        <!-- add exercise -->
        <form action="/view_plan" method="post" class="add_exercise">
            <h3>Add to workout</h3>
            <select name="wk_plan_add" id="add_ex_to_wk">
                <option style="display:none;" value="">Select Workout</option>
                {% for i in user_workouts %}
                <option value="{{i['wk_name']}}">{{i['wk_name']}}</option>
                {% endfor %}
            </select> 
            <br>
            <!-- auto-suggestion search -->
            <input type="text" name="exercise_name" list="exercise-list" autocomplete="off" placeholder="Search for exercise">
                <datalist id="exercise-list">
                    {% for i in all_exercises %}
                    <option value="{{i.exercise}}">
                    {% endfor %}
                </datalist>
            <input placeholder="reps" name="reps" type="text" autocomplete="off"><br>
            <input placeholder="weight" name="weight" type="text" autocomplete="off"><br>
            <input placeholder="measurement" name="measurement" type="text" autocomplete="off"><br>
            <input type="submit" value="Add to Workout"/>
        </form>
    </div>
        <!-- show table -->
        <table class="search_results" hidden="false" id="hiddenField">
            <thead>
                <th>Exercise</th>
                <th>Muscle</th>
                <th>Equipment</th>
                <th>reps</th>
                <th>Weight</th>
                <th>Remove</th>
            </thead>
            <tbody>
            {% for i in users_wks%}
                <tr>
                    <td>{{i['exercise']}}</td>
                    <td>{{i['muscle']}}</td>
                    <td>{{i['equipment']}}</td>
                    <td>{{i['reps']}}</td>
                    <td>{{i['weight'] + ' ' + i['measurement']}}</td>
                    <!-- allow user to delete exercise from workout -->
                    <td>
                        <form action="/view_plan" method="post" onsubmit="return conDelete()">
                            <input type="hidden" name="delete" value="{{i['exercise']}}">
                            <button type="submit">Delete</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% if users_wks %}
            <script>
                // show table
                showField();
                changeHeader("h2", 0, '{{ wk_choice }}')
                changeOption('add_ex_to_wk', 'Test');
            </script>
        {% endif %}
        {% if keep %}
            <script>
                //changeOption("Test")
                changeOption('get_wk_name', 'Test');
                // submit form to maintain table for user
                submitForm("retrieve_wk");
            </script>
        {% endif %}
    </div>
  </div>
{% endblock %}